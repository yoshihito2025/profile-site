---
title: "C言語のポインタ（応用）"
date: "2025-09-28"
---

この記事は[C 言語の基本（備忘録）](/blog/post1)の続きです。

ポインタはアドレスを保存する特殊な変数で、応用すると動的メモリの確保や二重ポインタを作ることができます。動的メモリはプログラム実行中に必要な分だけ確保できるメモリで、無駄を省くことができます。二重ポインタは「ポインタを指すポインタ」で、ポインタそのものを変えるときに使います。

## 動的メモリの使い方

```c
#include <stdio.h>
#include <stdlib.h>

int main() {
  int *a = malloc(sizeof(int)*3); // int 型の動的メモリを3つ確保
  a[0] = 11; // aの１つ目に 11 を代入（配列表記）
  *(a + 1) = 22; //aの2つ目に 22 を代入（ポインタ表記）
  a[2] = 33; // aの3つ目に 33 を代入（配列表記）
  printf("%d, %d, %d\n", *a, a[1], a[2]);
  free(a); // メモリを開放
  return 0;
}
```

### コードの解説

- `malloc()` : 動的メモリを確保する関数です。
- `free()` : 動的メモリを開放する関数で、開放しないとメモリリークが起こります（ゴミとしてメモリに溜まり続け、不具合を起こします）。

💡 動的メモリのアドレスを格納するのでポインタを使います。

### 配列表記とポインタ表記

書き方が同じなだけで、違いはありません。ポインタ表記で配列にアクセスすることも配列表記でポインタの配列や動的メモリにアクセスすることもできます。

## 二重ポインタ

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
  int a = 10;
  int *p = &a;
  int **pp = &p; // ポインタ pp に p のアドレスを保存

  printf("%d\n", **pp); // *(*pp) と同じ意味
  return 0;
}
```

### コードの解説

- `**pp` : ポインタを指すポインタ（`*(*pp)`と同じ意味）

## まとめ

ポインタを応用すると、

- 動的メモリの確保
- 二重ポインタの作成

ができます。

動的メモリを扱うとき、メモリの開放をし忘れないように注意する必要があります。
